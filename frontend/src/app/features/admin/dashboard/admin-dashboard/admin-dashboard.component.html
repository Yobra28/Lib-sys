<div class="p-6 space-y-6">
  <!-- Welcome header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-semibold text-slate-800">Welcome back, {{currentUser?.firstName || 'Admin'}}!</h1>
      <p class="text-sm text-slate-500 mt-1">Hereâ€™s your admin dashboard overview</p>
    </div>
    <div class="flex items-center gap-2">
      <button class="rounded-md border border-slate-200 px-4 py-2 hover:bg-slate-50">View Reports</button>
      <button class="btn-primary px-4 py-2 flex items-center gap-2"><mat-icon>add</mat-icon> Add Book</button>
    </div>
  </div>

  <!-- Stat cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
    <mat-card class="card p-5">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm text-slate-500">Total Books</div>
          <div class="text-2xl font-semibold">{{stats?.totalBooks || 0}}</div>
          <div class="text-xs text-success-600 mt-1">+2% this month</div>
        </div>
        <div class="w-10 h-10 bg-primary-100 text-primary-700 rounded-lg flex items-center justify-center">
          <mat-icon>menu_book</mat-icon>
        </div>
      </div>
    </mat-card>

    <mat-card class="card p-5">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm text-slate-500">Students</div>
          <div class="text-2xl font-semibold">{{stats?.totalUsers || 0}}</div>
          <div class="text-xs text-success-600 mt-1">+1% this month</div>
        </div>
        <div class="w-10 h-10 bg-secondary-100 text-secondary-700 rounded-lg flex items-center justify-center">
          <mat-icon>groups</mat-icon>
        </div>
      </div>
    </mat-card>

    <mat-card class="card p-5">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm text-slate-500">Active Borrows</div>
          <div class="text-2xl font-semibold">{{stats?.activeBorrows || 0}}</div>
          <div class="text-xs text-success-600 mt-1">+15% this week</div>
        </div>
        <div class="w-10 h-10 bg-accent-100 text-accent-700 rounded-lg flex items-center justify-center">
          <mat-icon>swap_horiz</mat-icon>
        </div>
      </div>
    </mat-card>

    <mat-card class="card p-5">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm text-slate-500">Total Fines (All Time)</div>
          <div class="text-2xl font-semibold">{{stats?.totalFinesAmount || 0 | currency:'USD':'symbol':'1.0-0'}}</div>
          <div class="text-xs text-slate-500 mt-1">Pending: {{stats?.pendingFinesAmount || 0 | currency:'USD':'symbol':'1.0-0'}}</div>
        </div>
        <div class="w-10 h-10 bg-green-100 text-green-700 rounded-lg flex items-center justify-center">
          <mat-icon>attach_money</mat-icon>
        </div>
      </div>
    </mat-card>
  </div>

  <!-- Charts section -->
  <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
    <!-- Borrowing trends simple line/progress list -->
    <mat-card class="card p-5">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold">Borrowing Trends</h2>
      </div>
      <div class="space-y-3">
        <div *ngFor="let t of trends" class="flex items-center gap-3">
          <div class="w-20 text-sm text-slate-600">{{t.month}}</div>
          <mat-progress-bar color="primary" mode="determinate" [value]="t.count"></mat-progress-bar>
          <div class="w-12 text-right text-sm">{{t.count}}</div>
        </div>
      </div>
    </mat-card>

    <!-- Category Distribution donut -->
    <mat-card class="card p-5">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold">Category Distribution</h2>
      </div>
      <div class="flex items-center gap-6">
        <div class="relative" style="width:180px;height:180px;">
          <div class="rounded-full" [style]="donutStyle" style="width:180px;height:180px;"></div>
          <div class="absolute inset-0 m-auto rounded-full bg-white" style="width:110px;height:110px;"></div>
        </div>
        <div class="space-y-2">
          <div *ngFor="let c of categories; let i = index" class="flex items-center gap-2 text-sm">
            <span class="inline-block w-3 h-3 rounded" [style.background]="['#10b981','#f59e0b','#ef4444','#3b82f6','#8b5cf6','#06b6d4'][i%6]"></span>
            <span class="min-w-[120px] truncate">{{c.category}}</span>
            <span class="text-slate-500">{{c.count}}</span>
          </div>
        </div>
      </div>
    </mat-card>
  </div>
</div>
